# ============================================
# .dockerignore - Turborepo Monorepo
# ============================================
# 作用：优化 Docker 构建上下文
# 原则：只把源码和必要文件打包进镜像
#       构建缓存、依赖、日志、运行时数据等全部排除
# ============================================

# ========================
# Node / pnpm 依赖
# ========================
# node_modules 会在 Docker 内重新安装
node_modules
# pnpm 全局存储目录
.pnpm-store

# ========================
# Turborepo 缓存
# ========================
.turbo

# ========================
# 构建输出
# ========================
.next       # Next.js 构建目录
dist       # Fastify / TS 构建目录
build
out        # Next.js 静态导出目录
coverage   # 测试覆盖率报告

# ========================
# 日志文件
# ========================
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

# ========================
# 环境变量文件（运行时通过 docker-compose 注入）
# ========================
.env*           # 排除所有本地环境文件
!.env.example   # 保留示例文件

# ========================
# 测试相关文件
# ========================
__tests__       # 单元测试目录
*.test.*        # 测试文件
*.spec.*        # 测试文件
.nyc_output     # 测试覆盖率缓存

# ========================
# 版本控制相关
# ========================
.git
.gitignore
.gitattributes

# ========================
# 编辑器 / 操作系统临时文件
# ========================
.vscode
.idea
.DS_Store
Thumbs.db
desktop.ini
*.swp
*.swo
*.swn
.history

# ========================
# CI/CD 和文档
# ========================
.github
.gitlab-ci.yml
.travis.yml
.circleci
docs
*.md
!README.md       # 保留 README

# ========================
# 缓存 / 临时文件
# ========================
.cache
tmp
temp
.temp
*.tsbuildinfo    # TypeScript 构建缓存

# ========================
# 运行时数据（使用 Docker 卷挂载）
# ========================
apps/api/uploads/         # 用户上传文件

# ========================
# 本地数据库文件（开发用）
# ========================
*.db
*.sqlite

# ========================
# 数据库 dump（非 migration）
# ========================
dump/
backups/

# ========================
# 进程管理器
# ========================
.pm2

# ========================
# docker-compose 文件（不打包进镜像）
# ========================
docker-compose*.yml
